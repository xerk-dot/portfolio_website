---
title: 'How I made this portfolio site'
abstract: Recently I migrated from Create React App to Next.js and made some major upgrades in the process.
date: '2024-05-21'
banner: /static/hello-world-banner.jpg
---

## First thoughts

I needed a portfolio website. I wanted a central hub which optimally showcased my work. I had an online presence, which, like everyone else's, had been hampered by fragmented social-media accounts; these commercial platforms are neo-feudal, sterile, and prudish gated-communties which put limits individual agency and expression. I needed an environment to call my own where all my contributions stemmed from.

The portfolio would feature two kinds of deliverables: projects (longer-term commitments with social impact) and articles (analytical approaches where I document and reflect). Nothing else. I would omit any autodidact inititive which could not fit in the two buckets.

I was not at all familiar with javascript frameworks. Though I had navigated through thousands of websites. I had a specific of what I wanted, so I wrote it out:
autodidact initiatives
### Giving myself constraints

#### Upon the first ten seconds of seeing the project (landing page and initial scroll down), the visitor:
- is greeted with simple TouchDesigner-esque 3D-graphics. They should appear as part of the background with a level of depth that is just about to reach the foreground.
- reads my name which features a simple text animation.
- knows to scroll down, and then is met with an exciting reveal of the 'About Me' section.
- later discovers that below the 'About Me' section, there is an initial list of three highlighted projects with sharp/jarring visuals. Below these three is a table with all projects.
- only sees projects initially. The articles are held in their own page and are not displayed alongside the projects.

#### When experiencing the portfolio:
- Each page has the exact same tonal shift, with all media eventually shifting from manic 3D-graphics to in-depth gonzo rabbitholes featuring inline images/videos and heavy hyperlinking and references. 
- You have a better understanding of my work, interests, and approaches.
- You enjoy the narrative-driven journey and can remember each step along the way.
- You think that certain words/dichotomies appeared in my brain. We both recognize this site is still a work in progress, but some of the terms might be (in no particular order): forward, energetic, fraternal, mechanical, rhythmic, rebellious, abstract, eclectic, sampling, playful, boastful, futuristic, avant-garde, dense, anthemic, misanthropic/depressive, surreal, longing

![A scene from Ghost in the Shell (1995) with the Major cloaking with thermoptic camouflage; the poster for Akira; The Matrix's digital rain effect](/static/inspiration.png)

## The first iteration

I was learning React when I first built this website, and while overkill for a personal portfolio site, it was a great opportunity to learn and experiment with learning it. I've found the best way to learn is by actually making something that you intend to use and ship.

The no-brainer choice at the time was [Create React App](https://github.com/facebook/create-react-app). It has 102k stars on Github! It served me well in getting things up and running without having to fuss about with config. On top of that, I was using Styled Components, Tween.js, and React Transition Group. I was also playing with some early Three.js effects like the displacement sphere that still resides on the homepage.

Since then I've used this website as a playground for experimenting with new tech and techniques, so over time I've overhauled pretty much everything. A big change along the way was replacing images of my work in static mockups with real-time rendered interactive 3D devices using Blender models I found ([Clay Mockups 3D Figma plugin](https://www.figma.com/community/plugin/819335598581469537/Clay-Mockups-3D)).

## Migrating to Next.js

With Create React App I was using a somewhat janky and unmaintained package to prerender the site as static HTML in Puppeteer. This worked okay for the most part, but I wanted a more robust solution for posting articles (like this one you're reading) using MDX. I had a half baked version of this lying dormant in the repo, but it never felt good enough to publish. I looked at a few options like Gatsby, Vite, and Parcel, and Remix, but Next.js stood out as the most suited to my needs.

- The site is now based on Next.js. Is a much better fit than Create React App. For now I'm just using it to create a static export, but maybe I'll add some server rendered stuff in the future.
- Styling is now vanilla CSS with postcss to add support for the future native CSS nesting and custom media queries features. I'm using CSS modules instead of BEM syntax to avoid style conflicts.
- For generating pages from `.mdx` files, I'm using Kent C Dodds' [mdx-bundler](https://github.com/kentcdodds/mdx-bundler). In combination with Next.js it makes generating pages from `.mdx` files really quick and simple.
- For animation I've moved from Tween.js and React Transition Group to just Framer Motion.
- 3D effects are still all using Three.js, but I've added `three-stdlib` as a better maintained replacement for modules from Three's examples.

## Not all smooth sailing

For the most part, the migration was pretty straight-forward. The way I has structured the site with React Router lent itself well to conforming with Next.js's file-based routing, and I was already using postcss for styling. I did, however, encounter a couple of problems:

### 1. Route transitions

There was a bit of a conflict when it came to animated route transitions. Next.js will immediately yank out all of the styles for the previous page when navigating to a new one. This works great when you're not animating between pages because it cleans up any unused styles form hanging around. When you are animating the page transition though, all of a sudden the previous page becomes jarringly completely unstyled as it transitions out. This problem one of [the most commented and reacted to issues](https://github.com/vercel/next.js/issues/17464) on the Next.js repo, so hopefully there's a fix soon, but for now I've dropped in a [hack to fix things](https://github.com/vercel/next.js/issues/17464#issuecomment-796430107) from the issue's comments.

### 2. Scroll restoration

Somewhat related to the route transitions, I had to opt out of both Next.js's and the native browser's scroll restoration in order to prevent the browser immediately scrolling to the top when the page started transitioning out. Next.js also doesn't appear to handle shifting focus when linking to the id of an element within the page, so I added that in for accessibility.

## Looking back, and forward

I look forward to continuing to use this site as a playground, and it'll be interesting to compare the next iteration to where it is today.

## Update: Feb 2024

I recently migrated the site to Remix now that they've got good support for CSS modules meaning I didn't need to convert all of my styling. It was mostly a process of deleting all of the hacks mentioned above in this post, and things just work and feel more "web standard". I'm now using the [CSS view transitions API](https://developer.mozilla.org/en-US/docs/Web/API/View_Transitions_API) to handle smoothly crossfading on route transitions, which is a feature baked into React Router (and as a result Remix). I don't need to do weird javascript hacks to try and set the correct theme (which still inevitably led to a flash of unthemed content) - I'm now storing the preferred theme in a session cookie which Remix makes really easy to do.

Overall I'm really happy with Remix, would totally recommend it. I would like to eventually replace a lot of animations triggered by Javascript with the upcoming scroll driven animations CSS API, but browser support isn't there yet, so maybe some time later this year.
